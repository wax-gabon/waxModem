/* Usage: node send_sms.js /path/to/device xxxxyyzz "Foo Bar" */

function err(message) {
  console.log('Usage: node send_sms.js /path/to/device xxxxyyzz "Foo Bar"');
  process.exit();
}

var device   = '/dev/tty.W995-SerialPort1';//process.argv[2];
var receiver = '07795991';//process.argv[3];
var text     = 'test';//process.argv[4];

if(!device || !receiver || !text) err();

var modem = require('../index.js').Modem();
modem.open(device, function() {
  modem.sms({
    receiver:receiver,
    text:text,
    encoding:'7bit'
  }, function(err, sent_ids) {
    console.log('>>', arguments);
    if(err)
      console.log('Error sending sms:', err);
    else
      console.log('Message sent successfully, here are reference ids:', sent_ids.join(','));
  });
});