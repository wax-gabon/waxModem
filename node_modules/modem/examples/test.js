/* Usage: node test.js /dev/tty.W995-SerialPort1 */

function err(message) {
  console.log('Usage: node read_all_sms.js /dev/tty.W995-SerialPort1');
  process.exit();
}

var device   = process.argv[2];

if(!device) err();

var modem = require('../index.js').Modem();
modem.open(device, function() {

 modem.getMessages(function() {
    console.log(arguments);
  });

modem.on('memory full', function(sms) {
    console.log(sms);
  });
});